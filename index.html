<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wisp Proxy Viewer</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
    }
    #url-bar {
      padding: 8px;
      display: flex;
      gap: 8px;
      background: #f0f0f0;
    }
    #iframe-container {
      flex: 1;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body>
  <div id="url-bar">
    <input type="text" id="url-input" placeholder="Enter URL" style="flex:1;">
    <button id="go">Go</button>
  </div>
  <div id="iframe-container">
    <iframe id="proxy-frame" src=""></iframe>
  </div>

  <script>
    const iframe = document.getElementById("proxy-frame");
    const input = document.getElementById("url-input");
    const goBtn = document.getElementById("go");

    const PROXY_BASE = "https://wisp-server-im20.onrender.com/proxy?url=";

    goBtn.onclick = () => {
      const url = input.value.trim();
      if (!url) return;
      iframe.src = PROXY_BASE + encodeURIComponent(url);
    };

    // Listen for navigation messages from iframe
    window.addEventListener("message", e => {
      if (e.data?.type === "navigate" && e.data.url) {
        iframe.src = PROXY_BASE + encodeURIComponent(e.data.url);
      }
    });

    // Optional: load a default page
    iframe.src = PROXY_BASE + encodeURIComponent("https://example.com");
  </script>
</body>
</html>