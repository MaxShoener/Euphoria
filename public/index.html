<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euphoria Browser</title>
<style>
  body, html { margin: 0; padding: 0; height: 100%; font-family: Arial, sans-serif; overflow: hidden; }
  #top-bar { display: flex; align-items: center; padding: 8px; background: #1e1e1e; border-radius: 12px; margin: 10px; }
  #top-bar button { margin-right: 8px; padding: 6px 12px; border-radius: 8px; border: none; background: #3a3a3a; color: white; cursor: pointer; }
  #top-bar input { flex: 1; padding: 6px 12px; border-radius: 8px; border: none; margin-right: 8px; background: #333; color: white; }
  #spinner { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.4); display: none; justify-content: center; align-items: center; z-index: 1000; }
  #spinner img { width: 64px; height: 64px; }
  #content { width: 100%; height: calc(100% - 60px); overflow: auto; }
</style>
</head>
<body>

<div id="top-bar">
  <button id="home">Home</button>
  <button id="back">◀</button>
  <button id="forward">▶</button>
  <button id="fullscreen">⛶</button>
  <input type="text" id="url" placeholder="Enter URL or search..." />
  <button id="go">Go</button>
</div>

<div id="spinner"><img src="spinner.gif" alt="Loading..."></div>
<iframe id="content"></iframe>

<script>
const spinner = document.getElementById('spinner');
const iframe = document.getElementById('content');
const urlInput = document.getElementById('url');
const historyStack = [];
let historyIndex = -1;

function showSpinner() { spinner.style.display = 'flex'; }
function hideSpinner() { spinner.style.display = 'none'; }

async function loadURL(url) {
  showSpinner();
  try {
    iframe.src = '/search?q=' + encodeURIComponent(url);
    if(historyIndex === -1 || historyStack[historyIndex] !== url) {
      historyStack.push(url);
      historyIndex = historyStack.length - 1;
    }
  } finally {
    setTimeout(hideSpinner, 2000); // minimum spinner
  }
}

document.getElementById('go').onclick = () => loadURL(urlInput.value);
document.getElementById('home').onclick = () => loadURL('https://www.google.com');
document.getElementById('back').onclick = () => {
  if(historyIndex > 0) {
    historyIndex--;
    urlInput.value = historyStack[historyIndex];
    loadURL(historyStack[historyIndex]);
  }
};
document.getElementById('forward').onclick = () => {
  if(historyIndex < historyStack.length - 1) {
    historyIndex++;
    urlInput.value = historyStack[historyIndex];
    loadURL(historyStack[historyIndex]);
  }
};
document.getElementById('fullscreen').onclick = () => {
  if(!document.fullscreenElement) document.documentElement.requestFullscreen();
  else document.exitFullscreen();
};

urlInput.addEventListener('keydown', (e) => {
  if(e.key === 'Enter') loadURL(urlInput.value);
});

// Load Google home on start
loadURL('https://www.google.com');
</script>

</body>
</html>
