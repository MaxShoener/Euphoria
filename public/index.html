<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Euphoria Browser</title>
  <style>
    body { margin:0; font-family:sans-serif; background:#f2f2f2; }
    #topbar { 
      position:fixed; top:10px; left:50%; transform:translateX(-50%);
      background:#222; border-radius:50px; padding:10px 20px; display:flex;
      align-items:center; gap:8px; z-index:1000; 
    }
    #topbar button { background:#444; border:none; color:#fff; padding:8px 12px; border-radius:20px; cursor:pointer; }
    #topbar input { border-radius:20px; padding:8px 12px; border:none; flex:1; }
    #iframe { position:absolute; top:60px; left:0; right:0; bottom:0; width:100%; height:calc(100%-60px); border:none; }
  </style>
</head>
<body>
  <div id="topbar">
    <button id="back">‚üµ</button>
    <button id="forward">‚ü∂</button>
    <button id="refresh">‚ü≥</button>
    <button id="home">üè†</button>
    <input id="urlinput" placeholder="Enter URL or search..." />
    <button id="fullscreen">‚õ∂</button>
  </div>
  <iframe id="iframe" src="https://www.google.com"></iframe>

  <script>
    const iframe = document.getElementById("iframe");
    const urlInput = document.getElementById("urlinput");
    const backBtn = document.getElementById("back");
    const forwardBtn = document.getElementById("forward");
    const refreshBtn = document.getElementById("refresh");
    const homeBtn = document.getElementById("home");
    const fsBtn = document.getElementById("fullscreen");

    let historyStack = [];
    let historyIndex = -1;

    function navigate(url) {
      if (!url.startsWith("http")) url = "https://www.google.com/search?q=" + encodeURIComponent(url);
      iframe.src = url;
      historyStack = historyStack.slice(0, historyIndex + 1);
      historyStack.push(url);
      historyIndex++;
      urlInput.value = url;
    }

    urlInput.addEventListener("keydown", e => {
      if (e.key === "Enter") navigate(urlInput.value);
    });
    backBtn.addEventListener("click", () => {
      if (historyIndex > 0) { historyIndex--; iframe.src = historyStack[historyIndex]; urlInput.value = historyStack[historyIndex]; }
    });
    forwardBtn.addEventListener("click", () => {
      if (historyIndex < historyStack.length -1) { historyIndex++; iframe.src = historyStack[historyIndex]; urlInput.value = historyStack[historyIndex]; }
    });
    refreshBtn.addEventListener("click", () => { iframe.src = iframe.src; });
    homeBtn.addEventListener("click", () => navigate("https://www.google.com"));
    fsBtn.addEventListener("click", () => {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    });

    // Autofill fetch (example)
    iframe.addEventListener("load", async () => {
      try {
        const response = await fetch("/autofill", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({ url:iframe.src })
        });
        const data = await response.json();
        console.log("Autofill fields:", data.fields);
      } catch(e){ console.error(e); }
    });
  </script>
</body>
</html>