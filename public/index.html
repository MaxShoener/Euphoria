<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Euphoria</title>
<style>
  :root { --bg:#0b0b0b; --bar:#111; --btn:#222; --btn-hover:#333; --accent:#2e7d32; color-scheme:dark; }
  html,body{height:100%;margin:0;background:var(--bg);font-family:system-ui,Arial,sans-serif;color:#fff;overflow:hidden}
  #launcher {
    position: fixed; top: 18px; left: 50%; transform:translateX(-50%);
    width: 84%; max-width:1100px; background:var(--bar); border-radius:30px; padding:10px 14px;
    display:flex; align-items:center; gap:10px; box-shadow:0 10px 30px rgba(0,0,0,0.6); z-index:1000;
  }
  #launcher button { min-width:46px; padding:8px 12px; border-radius:12px; border:0; background:var(--btn); color:#fff; cursor:pointer; }
  #launcher button:hover { background:var(--btn-hover); }
  #launcher input { flex:1; padding:10px 12px; border-radius:14px; border:0; background:#222; color:#fff; outline:none; font-size:15px; }
  main { position:absolute; top:90px; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; color:#999; overflow:auto; }
  .hint { text-align:center; max-width:720px; padding:30px; border-radius:12px; background: rgba(255,255,255,0.02); }
</style>
</head>
<body>
  <div id="launcher" role="search" aria-label="Euphoria launcher">
    <button id="back">‚óÄ</button>
    <button id="forward">‚ñ∂</button>
    <button id="refresh">‚ü≥</button>
    <button id="home">üè†</button>
    <input id="q" placeholder="Enter site or search (e.g. google.com)" />
    <button id="go" style="background:var(--accent)">Go</button>
    <button id="full">‚õ∂</button>
  </div>

  <main>
    <div class="hint">
      <h2>Euphoria</h2>
      <p>Type a site (for example <strong>google.com</strong> or <strong>xbox.com</strong>), press Enter or click Go. The proxy will load the site and keep the topbar UI injected into every page so navigation and logins remain inside Euphoria.</p>
    </div>
  </main>

<script>
  const q = document.getElementById('q');
  const go = document.getElementById('go');
  const back = document.getElementById('back');
  const forward = document.getElementById('forward');
  const refresh = document.getElementById('refresh');
  const home = document.getElementById('home');
  const full = document.getElementById('full');

  function isLikelySearch(v){
    if(!v) return true;
    if (v.includes(' ')) return true;
    if (/^https?:\/\//i.test(v)) return false;
    if (/\./.test(v)) return false;
    return true;
  }
  function normalize(v){
    v = (v||'').trim();
    if(!v) return 'https://www.google.com';
    if(isLikelySearch(v)) return 'https://www.google.com/search?q=' + encodeURIComponent(v);
    try{ new URL(v); return v; } catch(e) {}
    return 'https://' + v;
  }

  function openProxy(url){
    // if user pasted a /proxy?url= link, don't double-wrap
    if (/\\/proxy\\?url=/i.test(url)) { location.href = url; return; }
    const u = normalize(url);
    location.href = '/proxy?url=' + encodeURIComponent(u);
  }

  go.onclick = () => openProxy(q.value);
  q.addEventListener('keydown', e => { if(e.key === 'Enter') openProxy(q.value); });
  back.onclick = () => history.back();
  forward.onclick = () => history.forward();
  refresh.onclick = () => location.reload();
  home.onclick = () => { q.value=''; location.href = '/'; };
  full.onclick = () => { if (!document.fullscreenElement) document.documentElement.requestFullscreen(); else document.exitFullscreen(); };

  // prefill if /proxy?url present in location
  try {
    const params = new URLSearchParams(window.location.search);
    const u = params.get('url');
    if (u) q.value = decodeURIComponent(u);
  } catch(e){}
</script>
</body>
</html>
