<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euphoria Proxy</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:sans-serif; }
  body, html { width:100%; height:100%; overflow:hidden; background:#111; color:#fff; }
  #navbar {
    display:flex;
    gap:5px;
    padding:10px;
    background:#222;
    align-items:center;
  }
  #navbar input[type=text] {
    flex:1;
    padding:8px 12px;
    border:none;
    border-radius:4px;
    background:#333;
    color:#fff;
  }
  #navbar button {
    padding:8px 12px;
    border:none;
    border-radius:4px;
    background:#444;
    color:#fff;
    cursor:pointer;
    min-width:70px;
  }
  #navbar button:hover { background:#555; }
  #spinner {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.6);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:9999;
    display:none;
  }
  .loader {
    border:8px solid #444;
    border-top:8px solid #fff;
    border-radius:50%;
    width:50px; height:50px;
    animation:spin 1s linear infinite;
  }
  @keyframes spin {
    0% { transform:rotate(0deg);}
    100% { transform:rotate(360deg);}
  }
  iframe {
    width:100%;
    height:calc(100% - 50px);
    border:none;
  }
</style>
</head>
<body>
<div id="spinner"><div class="loader"></div></div>
<div id="navbar">
  <button id="back">‚óÄ Back</button>
  <button id="forward">‚ñ∂ Forward</button>
  <button id="home">üè† Home</button>
  <button id="refresh">‚ü≥ Refresh</button>
  <button id="fullscreen">‚õ∂ Fullscreen</button>
  <input type="text" id="url" placeholder="Enter URL or search term">
  <button id="go">Go</button>
</div>
<iframe id="browser" src=""></iframe>

<script>
const spinner = document.getElementById("spinner");
const iframe = document.getElementById("browser");
const urlInput = document.getElementById("url");
const goBtn = document.getElementById("go");
const backBtn = document.getElementById("back");
const forwardBtn = document.getElementById("forward");
const refreshBtn = document.getElementById("refresh");
const homeBtn = document.getElementById("home");
const fullscreenBtn = document.getElementById("fullscreen");
const navbar = document.getElementById("navbar");

let historyStack = [];
let historyIndex = -1;
let isFullscreen = false;

function showSpinner() { spinner.style.display = "flex"; }
function hideSpinner() { spinner.style.display = "none"; }

function navigate(url) {
  showSpinner();
  if (!/^https?:\/\//i.test(url)) {
    url = "https://www.google.com/search?q=" + encodeURIComponent(url);
  }
  const proxyUrl = `/proxy?url=${encodeURIComponent(url)}`;
  iframe.src = proxyUrl;

  if(historyIndex === -1 || historyStack[historyIndex] !== url) {
    historyStack = historyStack.slice(0, historyIndex+1);
    historyStack.push(url);
    historyIndex++;
  }
}

iframe.onload = () => { hideSpinner(); };

goBtn.onclick = () => navigate(urlInput.value);
urlInput.addEventListener("keypress", e => { if(e.key==="Enter") navigate(urlInput.value); });

backBtn.onclick = () => { if(historyIndex>0) { historyIndex--; navigate(historyStack[historyIndex]); } };
forwardBtn.onclick = () => { if(historyIndex<historyStack.length-1){ historyIndex++; navigate(historyStack[historyIndex]); } };
refreshBtn.onclick = () => { if(historyIndex>=0) iframe.src = `/proxy?url=${encodeURIComponent(historyStack[historyIndex])}`; };
homeBtn.onclick = () => { navigate("https://www.google.com"); urlInput.value = "google.com"; };

fullscreenBtn.onclick = () => {
  isFullscreen = !isFullscreen;
  navbar.style.display = isFullscreen ? "none" : "flex";
  iframe.style.height = isFullscreen ? "100%" : "calc(100% - 50px)";
};

// load home on startup
navigate("https://www.google.com");
urlInput.value = "google.com";
</script>
</body>
</html>
