<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Euphoria Proxy</title>
<style>
  body, html { margin: 0; padding: 0; font-family: sans-serif; height: 100%; }
  #top-bar { display: flex; gap: 5px; padding: 5px; background: #222; color: #fff; }
  #top-bar input { flex: 1; padding: 5px; border-radius: 4px; border: none; }
  #top-bar button { padding: 5px 10px; border-radius: 4px; border: none; background: #444; color: #fff; cursor: pointer; }
  #spinner { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
  #proxy-frame { width: 100%; height: calc(100% - 40px); border: none; }
</style>
</head>
<body>
<div id="top-bar">
  <button id="back">‚Üê</button>
  <button id="forward">‚Üí</button>
  <button id="refresh">‚ü≥</button>
  <button id="home">üè†</button>
  <input id="url" type="text" placeholder="Enter URL or search query"/>
  <button id="go">Go</button>
</div>
<img id="spinner" src="spinner.gif" alt="Loading..."/>
<iframe id="proxy-frame"></iframe>

<script>
const frame = document.getElementById("proxy-frame");
const urlInput = document.getElementById("url");
const spinner = document.getElementById("spinner");
const historyStack = [];
let historyIndex = -1;

function load(url) {
  spinner.style.display = "block";
  const target = encodeURIComponent(url);
  frame.src = `/proxy?url=${target}`;
  // Manage history
  if (historyIndex === -1 || historyStack[historyIndex] !== url) {
    historyStack.splice(historyIndex + 1);
    historyStack.push(url);
    historyIndex = historyStack.length - 1;
  }
}

frame.onload = () => spinner.style.display = "none";

// Buttons
document.getElementById("go").onclick = () => load(urlInput.value || "google.com");
document.getElementById("home").onclick = () => load("google.com");
document.getElementById("refresh").onclick = () => frame.src = frame.src;
document.getElementById("back").onclick = () => {
  if (historyIndex > 0) load(historyStack[--historyIndex]);
};
document.getElementById("forward").onclick = () => {
  if (historyIndex < historyStack.length - 1) load(historyStack[++historyIndex]);
};

// Enter key triggers Go
urlInput.addEventListener("keydown", e => { if(e.key === "Enter") load(urlInput.value); });
</script>
</body>
</html>
