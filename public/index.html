<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Euphoria — Wisp Client</title>

<style>
:root{
  --bg:#0b0c0e;
  --panel:rgba(18,18,18,0.55);
  --panel-strong:rgba(18,18,18,0.75);
  --control:rgba(255,255,255,0.08);
  --border:rgba(255,255,255,0.12);
  --accent:#2e7d32;
  --text:#ffffff;
  --muted:#aeb3b7;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  height:100%;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

body{
  display:flex;
  flex-direction:column;
}

/* ================= TOP OVAL NAV ================= */

#topbar{
  position:fixed;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  width:min(1100px,92%);
  height:56px;
  background:var(--panel);
  backdrop-filter:blur(18px);
  border:1px solid var(--border);
  border-radius:999px;
  display:flex;
  align-items:center;
  padding:0 18px;
  z-index:1000;
}

#nav-left,
#nav-right{
  display:flex;
  align-items:center;
  gap:10px;
}

#nav-center{
  flex:1;
  display:flex;
  justify-content:center;
}

.nav-btn{
  background:var(--control);
  border:1px solid var(--border);
  color:var(--text);
  border-radius:10px;
  padding:8px 12px;
  cursor:pointer;
  font-size:13px;
}
.nav-btn:hover{background:rgba(255,255,255,0.14)}

#url-input{
  width:100%;
  max-width:520px;
  background:rgba(0,0,0,0.35);
  border:1px solid var(--border);
  border-radius:999px;
  padding:10px 16px;
  color:var(--text);
  font-size:14px;
  outline:none;
}

/* ================= MAIN ================= */

main{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding-top:110px;
  padding-bottom:40px;
}

/* ================= HOME SCREEN ================= */

#home{
  width:min(520px,92%);
  background:var(--panel-strong);
  border:1px solid var(--border);
  border-radius:22px;
  padding:28px;
  text-align:center;
}

#home h1{
  margin:0 0 8px;
  font-size:28px;
}

#home p{
  margin:0 0 24px;
  color:var(--muted);
  font-size:14px;
}

#wisp-input{
  width:100%;
  background:rgba(0,0,0,0.35);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px;
  font-size:15px;
  color:var(--text);
  outline:none;
}

#connect-btn{
  margin-top:18px;
  width:100%;
  padding:14px;
  font-size:15px;
  background:linear-gradient(135deg,#2e7d32,#1b5e20);
  border:none;
  border-radius:12px;
  color:#fff;
  cursor:pointer;
}
#connect-btn:hover{opacity:.9}

/* ================= VIEW ================= */

#view{
  display:none;
  width:100%;
  height:100%;
}

/* ================= FOOTER ================= */

footer{
  text-align:center;
  font-size:12px;
  color:var(--muted);
  padding:12px;
}

/* ================= HIDDEN ================= */

.hidden{display:none}
</style>
</head>

<body>

<!-- ================= TOP NAV ================= -->

<div id="topbar" class="hidden">
  <div id="nav-left">
    <button class="nav-btn" id="back-btn">◀</button>
    <button class="nav-btn" id="forward-btn">▶</button>
    <button class="nav-btn" id="reload-btn">⟳</button>
  </div>

  <div id="nav-center">
    <input id="url-input" placeholder="Enter a URL and press Enter"/>
  </div>

  <div id="nav-right">
    <button class="nav-btn" id="home-btn">Home</button>
  </div>
</div>

<!-- ================= MAIN ================= -->

<main>

  <!-- HOME -->
  <div id="home">
    <h1>Euphoria</h1>
    <p>Connect to a Wisp server to begin browsing.</p>
    <input id="wisp-input" placeholder="https://your-wisp-server.example"/>
    <button id="connect-btn">Connect</button>
  </div>

  <!-- VIEW -->
  <div id="view"></div>

</main>

<footer>
  Euphoria Client — Session-based Wisp Connection
</footer>

<script>
/* ================= STATE ================= */

let wispServer = null;

/* ================= ELEMENTS ================= */

const home = document.getElementById("home");
const view = document.getElementById("view");
const topbar = document.getElementById("topbar");
const urlInput = document.getElementById("url-input");
const wispInput = document.getElementById("wisp-input");

/* ================= NAV ACTIONS ================= */

document.getElementById("back-btn").onclick = () => history.back();
document.getElementById("forward-btn").onclick = () => history.forward();
document.getElementById("reload-btn").onclick = () => location.reload();

document.getElementById("home-btn").onclick = () => {
  sessionStorage.removeItem("wisp");
  location.reload();
};

/* ================= CONNECT ================= */

document.getElementById("connect-btn").onclick = () => {
  const val = wispInput.value.trim();
  if(!val) return alert("Enter a Wisp server URL");
  try{
    new URL(val);
  }catch{
    return alert("Invalid URL");
  }
  sessionStorage.setItem("wisp", val);
  init();
};

/* ================= URL BAR ================= */

urlInput.addEventListener("keydown", e => {
  if(e.key !== "Enter") return;
  navigate(urlInput.value.trim());
});

/* ================= NAVIGATION ================= */

function navigate(target){
  if(!target) return;
  if(!/^https?:\/\//i.test(target)) target = "https://" + target;
  const proxied = wispServer.replace(/\/+$/,"") + "/proxy?url=" + encodeURIComponent(target);
  location.href = proxied;
}

/* ================= INIT ================= */

function init(){
  const saved = sessionStorage.getItem("wisp");
  if(!saved) return;
  wispServer = saved;
  home.style.display = "none";
  topbar.classList.remove("hidden");
  view.style.display = "block";
}

/* ================= BOOT ================= */

init();
</script>

</body>
</html>
