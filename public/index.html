<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Euphoria</title>
<style>
  body {
    margin: 0;
    background: #0c0c0c;
    color: white;
    font-family: system-ui;
    overflow: hidden;
  }
  #nav {
    position: fixed;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(25,25,25,0.9);
    border-radius: 50px;
    display: flex;
    align-items: center;
    padding: 8px 15px;
    z-index: 100;
  }
  #nav button {
    border: none;
    background: none;
    color: #fff;
    font-size: 16px;
    margin: 0 6px;
    cursor: pointer;
  }
  #nav button:hover { color: #00b8ff; }
  #url {
    width: 350px;
    padding: 6px 10px;
    border: none;
    border-radius: 25px;
    margin: 0 8px;
  }
  #content {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    border: none;
  }
</style>
</head>
<body>
  <div id="nav">
    <button id="back">‚Üê</button>
    <button id="forward">‚Üí</button>
    <button id="refresh">‚ü≥</button>
    <button id="home">üè†</button>
    <input id="url" list="history" placeholder="Enter URL or search...">
    <datalist id="history"></datalist>
    <button id="go">Go</button>
    <button id="fullscreen">‚õ∂</button>
  </div>
  <div id="content"></div>

  <script>
    const content = document.getElementById("content");
    const input = document.getElementById("url");
    const historyData = JSON.parse(localStorage.getItem("history") || "[]");
    const list = document.getElementById("history");

    function updateHistory(url) {
      if (!historyData.includes(url)) {
        historyData.unshift(url);
        if (historyData.length > 25) historyData.pop();
        localStorage.setItem("history", JSON.stringify(historyData));
        renderList();
      }
    }
    function renderList() {
      list.innerHTML = historyData.map(h => `<option value="${h}">`).join("");
    }
    renderList();

    let stack = [], index = -1;

    async function load(url) {
      if (!url) return;
      if (!url.startsWith("http")) url = "https://www.google.com/search?q=" + encodeURIComponent(url);
      updateHistory(url);
      input.value = url;
      const res = await fetch(`/proxy?url=${encodeURIComponent(url)}`);
      const text = await res.text();
      content.innerHTML = text;
      stack = stack.slice(0, index + 1);
      stack.push(url);
      index = stack.length - 1;
    }

    document.getElementById("go").onclick = () => load(input.value);
    input.addEventListener("keydown", e => e.key === "Enter" && load(input.value));
    document.getElementById("home").onclick = () => load("https://www.google.com");
    document.getElementById("refresh").onclick = () => load(stack[index]);
    document.getElementById("back").onclick = () => { if (index > 0) load(stack[--index]); };
    document.getElementById("forward").onclick = () => { if (index < stack.length - 1) load(stack[++index]); };
    document.getElementById("fullscreen").onclick = () => {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    };

    load("https://www.google.com");
  </script>
</body>
</html>