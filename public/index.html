<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Euphoria</title>
  <style>
    :root{
      --bg:#0e0f14;
      --panel:rgba(18,20,28,.86);
      --border:rgba(255,255,255,.10);
      --text:#f1f3ff;
      --muted:rgba(241,243,255,.65);
      --accent:#7aa2ff;
      --field:rgba(255,255,255,.06);
    }
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    .bar{
      position:sticky;top:0;z-index:50;
      display:flex;gap:10px;align-items:center;
      padding:10px 12px;
      background:var(--panel);
      border-bottom:1px solid var(--border);
      backdrop-filter: blur(14px);
    }
    .pill{
      display:flex;gap:8px;align-items:center;
      padding:10px 12px;border-radius:999px;
      background:rgba(255,255,255,.05);
      border:1px solid var(--border);
      flex:1;
      min-width:280px;
    }
    input,select,button{
      font:inherit;color:var(--text);
      background:var(--field);
      border:1px solid var(--border);
      border-radius:10px;
      padding:10px 10px;
      outline:none;
    }
    input{width:100%;}
    select{background:rgba(255,255,255,.08);}
    button{
      background:rgba(122,162,255,.18);
      border:1px solid rgba(122,162,255,.35);
      cursor:pointer;
    }
    button:hover{background:rgba(122,162,255,.24);}
    .small{font-size:12px;color:var(--muted);padding:10px 12px;}
    .row{display:flex;gap:10px;align-items:center;}
    .right{margin-left:auto;display:flex;gap:10px;align-items:center;}
    .badge{font-size:12px;color:var(--muted);border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:rgba(255,255,255,.04);}
    a{color:var(--accent);text-decoration:none;}
  </style>
</head>
<body>

  <div class="bar">
    <div class="pill">
      <input id="omnibox" placeholder="Search or enter URL (example.com or https://example.com)" autocomplete="off" />
    </div>

    <div class="row">
      <select id="mode" title="Engine">
        <option value="proxy">Basic</option>
        <option value="sj">Scramjet</option>
      </select>

      <input id="wisp" placeholder="WISP server (optional)" style="width:210px" />

      <select id="cookies" title="Cookie mode">
        <option value="1">Strict cookies</option>
        <option value="0">Loose cookies</option>
      </select>

      <button id="go">Go</button>
    </div>

    <div class="right">
      <span class="badge" id="status">WISP: self</span>
    </div>
  </div>

  <div class="small">
    Tip: enter a URL or any search text. Euphoria keeps navigation inside <code>/proxy</code> or <code>/sj</code>.
    <span style="margin-left:10px">Discovery: <a href="/.well-known/wisp.json" target="_blank" rel="noreferrer">/.well-known/wisp.json</a></span>
  </div>

  <script>
    const omnibox = document.getElementById("omnibox");
    const mode = document.getElementById("mode");
    const wisp = document.getElementById("wisp");
    const cookies = document.getElementById("cookies");
    const status = document.getElementById("status");
    const go = document.getElementById("go");

    function goNow(){
      const q = omnibox.value.trim();
      if(!q) return;
      const base = mode.value === "sj" ? "/sj" : "/proxy";
      const p = new URLSearchParams();
      p.set("url", q);
      p.set("strictCookies", cookies.value);
      if(wisp.value.trim()) p.set("wisp", wisp.value.trim());
      location.href = base + "?" + p.toString();
    }

    go.onclick = goNow;
    omnibox.addEventListener("keydown", (e)=>{ if(e.key === "Enter") goNow(); });

    function updateStatus(){
      const v = wisp.value.trim();
      status.textContent = v ? ("WISP: " + v) : "WISP: self";
    }
    wisp.addEventListener("input", updateStatus);
    updateStatus();
  </script>

</body>
</html>