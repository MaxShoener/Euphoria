<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euphoria Proxy</title>
<style>
  body {
    margin: 0;
    background: #0d0d0d;
    color: #fff;
    font-family: "Inter", sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }

  #topbar {
    display: flex;
    align-items: center;
    background: #111;
    padding: 8px;
    gap: 8px;
    transition: all 0.3s ease;
    z-index: 5;
  }

  button, input {
    border: none;
    outline: none;
  }

  .nav-btn {
    background: #1e1e1e;
    color: #ccc;
    font-size: 16px;
    border-radius: 8px;
    padding: 8px 12px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .nav-btn:hover {
    background: #333;
  }

  #url {
    flex: 1;
    padding: 8px 12px;
    border-radius: 8px;
    background: #1e1e1e;
    color: #fff;
  }

  iframe {
    flex: 1;
    border: none;
    width: 100%;
    background: white;
  }

  .hidden {
    transform: translateY(-100%);
  }
</style>
</head>
<body>

<div id="topbar">
  <button class="nav-btn" id="home">üè†</button>
  <button class="nav-btn" id="back">‚üµ</button>
  <button class="nav-btn" id="forward">‚ü∂</button>
  <button class="nav-btn" id="refresh">‚ü≥</button>
  <input type="text" id="url" placeholder="Enter URL or search...">
  <button class="nav-btn" id="go">Go</button>
  <button class="nav-btn" id="fullscreen">‚õ∂</button>
</div>

<iframe id="browser"></iframe>

<script>
const iframe = document.getElementById('browser');
const urlInput = document.getElementById('url');
const bar = document.getElementById('topbar');

function formatInput(value) {
  value = value.trim();
  if (!value) return "https://www.google.com";
  if (!value.includes('.') && !value.startsWith('http')) {
    return "https://www.google.com/search?q=" + encodeURIComponent(value);
  }
  if (!/^https?:\/\//i.test(value)) {
    value = "https://" + value;
  }
  return value;
}

function loadURL(u) {
  const finalURL = formatInput(u);
  urlInput.value = finalURL;
  iframe.src = "/proxy?url=" + encodeURIComponent(finalURL);
}

document.getElementById('go').onclick = () => loadURL(urlInput.value);
urlInput.addEventListener('keydown', e => { if (e.key === 'Enter') loadURL(urlInput.value); });
document.getElementById('home').onclick = () => loadURL('https://www.google.com');
document.getElementById('refresh').onclick = () => iframe.contentWindow.location.reload();
document.getElementById('fullscreen').onclick = () => {
  bar.classList.toggle('hidden');
};
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') bar.classList.remove('hidden');
});

loadURL('https://www.google.com');
</script>
</body>
</html>
